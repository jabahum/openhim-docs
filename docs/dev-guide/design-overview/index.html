<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-60988221-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-60988221-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>

<title data-react-helmet="true">Design overview | OpenHIM</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="OpenHIM"><meta data-react-helmet="true" name="docsearch:version" content="5.2.x"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="an overview of the interoperability layer"><meta data-react-helmet="true" property="og:description" content="an overview of the interoperability layer"><meta data-react-helmet="true" name="keywords" content="openhim,design,summary"><meta data-react-helmet="true" property="og:url" content="https://jembi.github.io/docs/dev-guide/design-overview">

<link data-react-helmet="true" rel="shortcut icon" href="/img/openhim_badge.png">


<link rel="stylesheet" href="/styles.22fcb1dc.css">


<link rel="preload" href="/styles.415ca181.js" as="script">

<link rel="preload" href="/runtime~main.25bedfcc.js" as="script">

<link rel="preload" href="/main.45379422.js" as="script">

<link rel="preload" href="/2.3fc48fbf.js" as="script">

<link rel="preload" href="/3.9a2502d1.js" as="script">

<link rel="preload" href="/247.62fbec7f.js" as="script">

<link rel="preload" href="/20ac7829.892a8eda.js" as="script">

<link rel="preload" href="/17896441.458891ec.js" as="script">

<link rel="preload" href="/50100135.057b3cba.js" as="script">

</head>
<body>

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/openhim-logo-green.svg" alt="OpenHIM"></a><a class="navbar__item navbar__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">5.2.x</a><a class="navbar__item navbar__link" href="/docs/introduction/about">Docs</a><a class="navbar__item navbar__link" href="/docs/api/introduction/welcome">API</a><a class="navbar__item navbar__link" href="/mediator-library">Mediator Library</a><a class="navbar__item navbar__link" href="/help">Help</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/jembi/openhim-core-js">GitHub</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/openhim-logo-green.svg" alt="OpenHIM"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">5.2.x</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/about">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/api/introduction/welcome">API</a></li><li class="menu__list-item"><a class="menu__link" href="/mediator-library">Mediator Library</a></li><li class="menu__list-item"><a class="menu__link" href="/help">Help</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/jembi/openhim-core-js">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="sidebarLogo_3ono"><img src="/img/openhim-logo-green.svg" alt="OpenHIM"></div><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/about">About the OpenHIM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/key-components">Key Components</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/community">Community</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/prerequisites">Prerequisites</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/install">Install OpenHIM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/configuration">Configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/installation/docker">Install via Docker</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/npm">Install via NPM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/manual">Install Manually</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/console-configuration">Console Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/virtual-machine">Install on a Virtual Machine</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/certificates">Certificates</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/channels">Channels</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/clients">Clients</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/contact-list">Contact list</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/import-export">Import/Export</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/mediators">Mediators</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/users">Users</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/visualizers">Visualizers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/mediators/basic-scaffold">Scaffold Mediator</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/mediators/orchestrator">Orchestrator Mediator</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/mediators/production-scaffold">Scaffold Production Mediator</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/overview">OpenHIM Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/adding-users">Adding Users</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/transaction-list">Transaction List</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/alerting-reports">Alerting and reports</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/polling-channels">Polling Channels (scheduled tasks)</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/certificates-keystore">Certificates &amp; Keystore</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/mediators">Mediators</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/sample-disaster-recovery-procedure">Sample disaster recovery procedure</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/openhim-core-versioning-and-compatibility">OpenHIM Core versioning and compatibility - OpenHIM - Versioning</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/auditing">Auditing</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Developer Guide</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/dev-guide/design-overview">Design overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev-guide/design-details">Detailed design using Node.js</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev-guide/openhim-development">Getting started with OpenHIM development</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev-guide/developing-mediators">Developing mediators</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev-guide/contributing">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Implementations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/implementations/datim">DATIM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/implementations/mhero">mHero</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/implementations/momconnect">MomConnect</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/implementations/openhie">OpenHIE</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How to</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/install-on-centos">Install on CentOS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/setup-ssl">Setup SSL</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/run-openhim-on-startup">Run the OpenHIM on startup</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/export-import-configuration">Export/import Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/setup-basic-cluster">Setup a basic cluster</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/manually-install-on-windows">Manually install on Windows</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><span style="vertical-align:top" class="badge badge--info">Version: 5.2.x</span><header><h1 class="docTitle_1vWb">Design overview</h1></header><div class="markdown"><p>This section describes the architectural design of an Interoperability Layer for use within the <a href="https://ohie.org/">OpenHIE project</a> (The OpenHIM is a reference implementation of an OpenHIE Interoperability Layer). It describes the key components that should make up an interoperability layer and how this relates to the other services that are used in OpenHIE.</p><p>Conceptually, the OpenHIM consists of the following three components:</p><ol><li>Core (thin proxy)</li><li>Administration Console</li><li>Mediators including orchestrators and adapter services</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="key-requirements"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#key-requirements" title="Direct link to heading">#</a>Key Requirements</h2><p>The full set of requirements that the Interoperability Layer community have identified can be found here: <a href="https://wiki.ohie.org/display/SUB/Interoperability+Layer+-+Use+Cases+and+Requirements">Interoperability Layer - Use Cases and Requirements</a></p><p>The following is a list of key requirements that are seen as necessary for any type of interoperability layer:</p><ul><li>Provide a central point for authentication and authorization to the HIE services.</li><li>Log, audit and monitor communications for the components of the HIE.</li><li>Provide error management and transaction monitoring information to the administrators of the HIE.</li><li>Provide transaction orchestration services as well as adapter services to transform message between different message formats.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-architecture"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-architecture" title="Direct link to heading">#</a>The architecture</h2><p>The architecture of the Interoperability Layer(IL) is shown below in the context of the other expected services and registries. The Interoperability Layer (IL) components are show in <strong><span style="color:rgb(51,204,204)">blue</span></strong>, the domain services (registries) are shown in <strong><span style="color:rgb(153,51,0)">red</span></strong> and the clients are shown in <span style="color:rgb(153,204,0)"><strong>green.</strong></span></p><img alt="Central HIM component" src="/img/design/Central-HIM-componentv2.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-core-thin-proxy-component"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-core-thin-proxy-component" title="Direct link to heading">#</a>The Core (thin proxy) component</h3><p>The Core provides the key functions and services required for an interoperability layer. These functions are useful in a service-oriented architecture (SOA) environment, which is essentially a collection of services that communicate with each other.</p><p>This component can be thought of as the entry point into the HIE. It provides some common mundane services so that other domain services don&#x27;t have to implement these. This component essentially acts as a web service proxy while performing some additional functions on the incoming requests. It makes use of several other services in order to perform the functions mentioned below:</p><ul><li><strong>Authorisation and Authentication</strong> - This service ensures that the client (human user or system) requesting or submitting information is known to the HIE and has the correct privileges or permissions to do so.</li><li><strong>Log Service</strong> - This service stores each message in its entirety along with metadata about the message, such as who sent it, time and date the message was received, and the response that the service returned, as well as error information if available.</li><li><strong>Audit service</strong> - This service audits each message received by storing an audit log entry. This log entry contains certain key information such as who sent the message, what information was requested and when the information was requested.</li><li><strong>Basic Routing</strong> - A routing mechanism that routes requests received to the correct upstream service. The router makes use of a publish and subscribe pattern so that messages can be routed to multiple interested parties. This allows for the secondary use of the messages received by the system. For example, an encounter message could be routed to the Shared Health Record (SHR) as well as an aggregation service where they could be aggregated and submitted to an aggregate data store such as a data warehouse.</li></ul><p>The interoperability layer and system that it connects to will make use of the <a href="http://wiki.ihe.net/index.php?title=Audit_Trail_and_Node_Authentication">IHE ATNA profile</a>&#x27;s node authentication section for authentication. For authorization the provider registry will maintain a list of provider authorities and the interoperability layer will check these during orchestration of each transaction.</p><p>Derek Ritz has put together a great slideshow to show how authorization and authentication will be handled within OpenHIE. Download the resource here: <a href="https://wiki.ohie.org/download/attachments/11370499/13-10-16%20authentication%20and%20authorization.pptx?version=1&amp;modificationDate=1381995929235&amp;api=v2">authentication and authorization slideshow</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="administration-console"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#administration-console" title="Direct link to heading">#</a>Administration Console</h3><p>The console is an interactive web application which allows the system administrator to configure the OpenHIM core and carry out maintenance and monitoring of the transactions passing through the channels. The main functions of the OpenHIM console are to:</p><ul><li>Create and manage users and adjust their group membership</li><li>Configure clients, channels, and routes</li><li>Monitor transactions</li><li>View an audit log of the system interactions</li><li>Manage errors by allowing an administrator to re-run failed transactions individually or in bulk</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mediators"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mediators" title="Direct link to heading">#</a>Mediators</h3><p>Mediation refers to the processing of data so that it can be communicated from one interface to another. OpenHIM mediators are separate services that run independently from the OpenHIM core and perform additional mediation tasks for a particular use case. They are often implementation specific, designed and built to meet a specific need. Each of these components are separate, independent services that perform a specific function following the <a href="http://yobriefca.se/blog/2013/04/29/micro-service-architecture/">micro services architecture</a>.</p><p>There are three types of mediators:</p><ul><li><strong>Pass-through mediator</strong> - Accepts a request and passes it on unchanged (used for tutorials).</li><li><strong>Adaptor mediator</strong> - This service type adapts an incoming request to a form that the intended recipient of the request can understand: it accepts a request and transforms/adapts the request into another format before sending the request on to its final destination e.g. HL7 v2 to HL7 v3 or MHD to XDS.b. They are used to simplify communication with the domain services (for orchestrator use) and to adapt a standards-based interface to a custom domain service interface (or vice versa).</li><li><strong>Orchestration mediator</strong> - This service type enables a business process to be executed: this normally involves one or more additional services being invoked to process the required transaction. It accepts a request and uses that request to execute a business function that may need to call out to other service endpoints on other systems e.g. enriching a message with a client’s unique identifier retrieved from a client registry.</li></ul><p>These services are invoked whenever there is a need to orchestrate or adapt a certain transaction. Both the orchestrator and adapter services are also expected to log and audit messages that they send out to the domain services. If they are not needed the core interoperability layer component will just call the domain service directly. Orchestrators may use other adapters to send messages to other services. Designing these orchestrators and adapters as independent services allow for additional logic or business processes to be added as the need arises. This allows the solution architecture to adapt and grow as the environment changes.</p><p>Mediators can be built using any desired platform or any language fit for the requirement. The OpenHIM core defines the interfaces that the mediators are able to use to communicate and exchange metadata with the core, both at a transaction-level as well as general configuration for the mediator. Mediators can also use these interfaces to send their <code>availability</code> status to the Core for monitoring purposes.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/user-guide/auditing"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Auditing</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/dev-guide/design-details"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Detailed design using Node.js »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#key-requirements" class="contents__link">Key Requirements</a></li><li><a href="#the-architecture" class="contents__link">The architecture</a><ul><li><a href="#the-core-thin-proxy-component" class="contents__link">The Core (thin proxy) component</a></li><li><a href="#administration-console" class="contents__link">Administration Console</a></li><li><a href="#mediators" class="contents__link">Mediators</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/about">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/introduction/welcome">API</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://wiki.ohie.org/display/SUB/Interoperability+Layer+Community">OpenHIE</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/channel/UCz3UpAGDJbKG7KkorgMGfEA">YouTube Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Playgrounds</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://sandbox.openhim.org">OpenHIM 5.2-latest Sandbox</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://jembi.org" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1Wg7"><img class="footer__logo" alt="Jembi health Systems Logo" src="/img/jembi-logo.png"></a></div><div>Copyright © 2020 Jembi Health Systems NPC</div></div></div></footer>
</div>

<script src="/styles.415ca181.js"></script>

<script src="/runtime~main.25bedfcc.js"></script>

<script src="/main.45379422.js"></script>

<script src="/2.3fc48fbf.js"></script>

<script src="/3.9a2502d1.js"></script>

<script src="/247.62fbec7f.js"></script>

<script src="/20ac7829.892a8eda.js"></script>

<script src="/17896441.458891ec.js"></script>

<script src="/50100135.057b3cba.js"></script>


</body>
</html>