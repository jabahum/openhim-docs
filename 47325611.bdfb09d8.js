(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{152:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return o})),r.d(t,"rightToc",(function(){return i})),r.d(t,"default",(function(){return c}));r(0);var a=r(302);function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const o={id:"sample-disaster-recovery-procedure",title:"Sample disaster recovery procedure",sidebar_label:"Sample disaster recovery procedure"},i=[{value:"Prior to disaster",id:"prior-to-disaster",children:[{value:"Security and fire-walling",id:"security-and-fire-walling",children:[]}]},{value:"During a disaster",id:"during-a-disaster",children:[]},{value:"After the disaster",id:"after-the-disaster",children:[]},{value:"Disaster Scenario Test",id:"disaster-scenario-test",children:[]}],s={rightToc:i},l="wrapper";function c({components:e,...t}){return Object(a.b)(l,n({},s,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("p",null,"This page describes a suggested disaster recover plan for an OpenHIM deployment. We suggest you follow this as a minimum for an production deployment of the OpenHIM."),Object(a.b)("h2",{id:"prior-to-disaster"},"Prior to disaster"),Object(a.b)("p",null,"The OpenHIM can be configured fairly simply to allow for disaster recovery. The only artifacts that need to be protected are the mongodb databases (main and the audit db) that the OpenHIM uses and the OpenHIM config file(s) that are used."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"For each mongo database you should use a geographically distributed replica set for redundancy. See ",Object(a.b)("a",n({parentName:"li"},{href:"http://docs.mongodb.org/manual/tutorial/deploy-geographically-distributed-replica-set/"}),"here for more details"),". A 3 node set is suggested with 2 nodes in your primary data center and 1 node in a geographically distant location."),Object(a.b)("li",{parentName:"ul"},"The OpenHIM config file(s) should also be backed up. These should be periodically rsync\u2019d to a geographically distant location (this can be on the same instance that your distant mongodb node is located).")),Object(a.b)("p",null,"A resource should also be created that describes the location of where the backup data is stored and contains the details of servers and procedure put in place through using this guide."),Object(a.b)("h3",{id:"security-and-fire-walling"},"Security and fire-walling"),Object(a.b)("p",null,"To secure the OpenHIM we suggest only allowing access to the specific port needed for the application to run. The following must be exposed, all others should be restricted."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"OpenHIM API port (default: 8080)"),Object(a.b)("li",{parentName:"ul"},"OpenHIM non-secure transaction port (default: 5001)"),Object(a.b)("li",{parentName:"ul"},"OpenHIM secure transaction port (default: 5000)"),Object(a.b)("li",{parentName:"ul"},"Any TCP ports you have specified in the OpenHIM UI")),Object(a.b)("p",null,"We also suggest that the mongodb replica sets all be hosted on instances separate from the OpenHIM application with only the follow port allowed through the firewall:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"The mongodb port (default: 27017)")),Object(a.b)("p",null,"We \xa0also suggest that these instances block access from all other IPs other than the instance that the OpenHIM-core server is hosted on."),Object(a.b)("h2",{id:"during-a-disaster"},"During a disaster"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Ensure that a new primary mongodb node is elected if mongo was the failure"),Object(a.b)("li",{parentName:"ol"},"Ensure that the application remains operable."),Object(a.b)("li",{parentName:"ol"},"Attempt to bring up the failed system. If this is a mongodb node ensure that is rejoins the replica set.")),Object(a.b)("h2",{id:"after-the-disaster"},"After the disaster"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Ensure that no data was lost."),Object(a.b)("li",{parentName:"ol"},"Identify root cause of the problem."),Object(a.b)("li",{parentName:"ol"},"Attempt to mitigate the root cause of the problem.")),Object(a.b)("h2",{id:"disaster-scenario-test"},"Disaster Scenario Test"),Object(a.b)("p",null,"A schedule should be set up that outlines when the disaster recovery process is tested. Ideally the test scenario should be executed greater than zero times per project."))}c.isMDXComponent=!0},302:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u}));var a=r(0),n=r.n(a),o=n.a.createContext({}),i=function(e){var t=n.a.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):Object.assign({},t,e)),r},s=function(e){var t=i(e.components);return n.a.createElement(o.Provider,{value:t},e.children)};var l="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,l=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(r[a]=e[a]);return r}(e,["components","mdxType","originalType","parentName"]),d=i(r),u=a,p=d[s+"."+u]||d[u]||c[u]||o;return r?n.a.createElement(p,Object.assign({},{ref:t},l,{components:r})):n.a.createElement(p,Object.assign({},{ref:t},l))}));function u(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[l]="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=r[u];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);